#by CSL for HUSTOJ 21.06.26

FROM ubuntu:20.04

#by CSL
#RUN     sed -i 's/archive.ubuntu/mirrors.163/g' /etc/apt/sources.list &&\

RUN	    apt update && \
	      DEBIAN_FRONTEND=noninteractive \
    	  apt -y install --no-install-recommends \
        libmysqlclient-dev \
        libmysql++-dev \
        make \
        flex \
        gcc \
        g++ \
        iptables \
        python \
        python3 \
	      fp-compiler \
	      mono-devel \
	      busybox \
	      dos2unix \
        openjdk-14-jdk\
	      subversion \
	      wget

RUN     apt -y install sqlite3
RUN     useradd -m -u 1536 judge

#by CSL
#RUN     cd /home/judge/ && \ 
#	wget dl.hustoj.com/hustoj.tar.gz && \
#        tar xzf hustoj.tar.gz 

#by CSL
RUN     apt -y install zip
RUN     apt -y install unzip
RUN     cd /home/judge/
RUN     wget https://raw.githubusercontent.com/melongist/CSL/master/HUSTOJ/hustoj210626.zip 

#Github update
#RUN	svn up /home/judge/src 
RUN     cd /home/judge/src/core/ && \
	bash make.sh 

# for more compilers, remove # and run "docker build -t hustoj ."
#RUN     apt -y install ruby
#RUN     apt -y install gobjc
#RUN     apt -y install clang
#RUN     apt -y install guile-3.0
#RUN     apt -y install lua5.3
#RUN     apt -y install nodejs
#RUN     apt -y install golang
#RUN     apt -y install sqlite3
#RUN     apt -y install gfortran
#RUN     apt -y install octave
